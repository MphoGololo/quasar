<!DOCTYPE html>
<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for HTML5 for Linux version 5.4.0">
  <meta content="text/html; charset=utf-8" http-equiv=
  "content-type">
  <style type="text/css">
  .lst-kix_6o9r0274l4qg-1>li:before{content:"\0025cb  "}.lst-kix_6o9r0274l4qg-2>li:before{content:"\0025a0  "}.lst-kix_6o9r0274l4qg-3>li:before{content:"\0025cf  "}.lst-kix_6o9r0274l4qg-5>li:before{content:"\0025a0  "}.lst-kix_6o9r0274l4qg-4>li:before{content:"\0025cb  "}.lst-kix_tdm04nsxcy8q-5>li{counter-increment:lst-ctn-kix_tdm04nsxcy8q-5}ol.lst-kix_tdm04nsxcy8q-0{list-style-type:none}ol.lst-kix_tdm04nsxcy8q-1{list-style-type:none}ul.lst-kix_c79ho0blhc8k-0{list-style-type:none}.lst-kix_8sxsy1a8ths3-8>li:before{content:"\0025a0  "}.lst-kix_6o9r0274l4qg-7>li:before{content:"\0025cb  "}ol.lst-kix_tdm04nsxcy8q-4{list-style-type:none}ul.lst-kix_c79ho0blhc8k-2{list-style-type:none}ol.lst-kix_tdm04nsxcy8q-5{list-style-type:none}ul.lst-kix_c79ho0blhc8k-1{list-style-type:none}ol.lst-kix_tdm04nsxcy8q-2{list-style-type:none}ul.lst-kix_c79ho0blhc8k-4{list-style-type:none}.lst-kix_6o9r0274l4qg-6>li:before{content:"\0025cf  "}ol.lst-kix_tdm04nsxcy8q-3{list-style-type:none}ul.lst-kix_c79ho0blhc8k-3{list-style-type:none}.lst-kix_6o9r0274l4qg-8>li:before{content:"\0025a0  "}ol.lst-kix_tdm04nsxcy8q-2.start{counter-reset:lst-ctn-kix_tdm04nsxcy8q-2 0}ol.lst-kix_tdm04nsxcy8q-8.start{counter-reset:lst-ctn-kix_tdm04nsxcy8q-8 0}.lst-kix_tdm04nsxcy8q-7>li{counter-increment:lst-ctn-kix_tdm04nsxcy8q-7}.lst-kix_ytm01fwibfq9-0>li:before{content:"\0025cf  "}.lst-kix_ytm01fwibfq9-1>li:before{content:"\0025cb  "}.lst-kix_tdm04nsxcy8q-4>li{counter-increment:lst-ctn-kix_tdm04nsxcy8q-4}ol.lst-kix_tdm04nsxcy8q-5.start{counter-reset:lst-ctn-kix_tdm04nsxcy8q-5 0}ul.lst-kix_ytm01fwibfq9-2{list-style-type:none}.lst-kix_ytm01fwibfq9-3>li:before{content:"\0025cf  "}ul.lst-kix_ytm01fwibfq9-3{list-style-type:none}ul.lst-kix_8sxsy1a8ths3-8{list-style-type:none}ul.lst-kix_ytm01fwibfq9-0{list-style-type:none}.lst-kix_ytm01fwibfq9-2>li:before{content:"\0025a0  "}.lst-kix_ytm01fwibfq9-4>li:before{content:"\0025cb  "}ul.lst-kix_ytm01fwibfq9-1{list-style-type:none}ul.lst-kix_ytm01fwibfq9-6{list-style-type:none}ul.lst-kix_ytm01fwibfq9-7{list-style-type:none}ul.lst-kix_ytm01fwibfq9-4{list-style-type:none}ul.lst-kix_ytm01fwibfq9-5{list-style-type:none}.lst-kix_ytm01fwibfq9-6>li:before{content:"\0025cf  "}ul.lst-kix_ytm01fwibfq9-8{list-style-type:none}.lst-kix_ytm01fwibfq9-5>li:before{content:"\0025a0  "}ul.lst-kix_6o9r0274l4qg-0{list-style-type:none}ul.lst-kix_6o9r0274l4qg-1{list-style-type:none}ul.lst-kix_6o9r0274l4qg-4{list-style-type:none}.lst-kix_tdm04nsxcy8q-5>li:before{content:"" counter(lst-ctn-kix_tdm04nsxcy8q-5,lower-roman) ". "}ul.lst-kix_6o9r0274l4qg-5{list-style-type:none}ul.lst-kix_6o9r0274l4qg-2{list-style-type:none}ul.lst-kix_6o9r0274l4qg-3{list-style-type:none}ul.lst-kix_6o9r0274l4qg-8{list-style-type:none}.lst-kix_tdm04nsxcy8q-3>li:before{content:"" counter(lst-ctn-kix_tdm04nsxcy8q-3,decimal) ". "}.lst-kix_tdm04nsxcy8q-7>li:before{content:"" counter(lst-ctn-kix_tdm04nsxcy8q-7,lower-latin) ". "}ol.lst-kix_tdm04nsxcy8q-4.start{counter-reset:lst-ctn-kix_tdm04nsxcy8q-4 0}ul.lst-kix_6o9r0274l4qg-6{list-style-type:none}.lst-kix_tdm04nsxcy8q-4>li:before{content:"" counter(lst-ctn-kix_tdm04nsxcy8q-4,lower-latin) ". "}.lst-kix_tdm04nsxcy8q-8>li:before{content:"" counter(lst-ctn-kix_tdm04nsxcy8q-8,lower-roman) ". "}ul.lst-kix_6o9r0274l4qg-7{list-style-type:none}.lst-kix_ytm01fwibfq9-7>li:before{content:"\0025cb  "}.lst-kix_ytm01fwibfq9-8>li:before{content:"\0025a0  "}.lst-kix_tdm04nsxcy8q-6>li:before{content:"" counter(lst-ctn-kix_tdm04nsxcy8q-6,decimal) ". "}.lst-kix_tdm04nsxcy8q-6>li{counter-increment:lst-ctn-kix_tdm04nsxcy8q-6}.lst-kix_tdm04nsxcy8q-3>li{counter-increment:lst-ctn-kix_tdm04nsxcy8q-3}ol.lst-kix_tdm04nsxcy8q-8{list-style-type:none}ol.lst-kix_tdm04nsxcy8q-6{list-style-type:none}ol.lst-kix_tdm04nsxcy8q-7{list-style-type:none}.lst-kix_tdm04nsxcy8q-0>li{counter-increment:lst-ctn-kix_tdm04nsxcy8q-0}ol.lst-kix_tdm04nsxcy8q-3.start{counter-reset:lst-ctn-kix_tdm04nsxcy8q-3 0}ol.lst-kix_tdm04nsxcy8q-6.start{counter-reset:lst-ctn-kix_tdm04nsxcy8q-6 0}.lst-kix_r3new9a30ppi-8>li:before{content:"\0025a0  "}.lst-kix_r3new9a30ppi-6>li:before{content:"\0025cf  "}.lst-kix_r3new9a30ppi-7>li:before{content:"\0025cb  "}.lst-kix_r3new9a30ppi-3>li:before{content:"\0025cf  "}.lst-kix_r3new9a30ppi-4>li:before{content:"\0025cb  "}.lst-kix_r3new9a30ppi-5>li:before{content:"\0025a0  "}ul.lst-kix_r3new9a30ppi-1{list-style-type:none}ul.lst-kix_r3new9a30ppi-0{list-style-type:none}.lst-kix_ay3zsv6x7td8-4>li:before{content:"\0025cb  "}.lst-kix_ay3zsv6x7td8-5>li:before{content:"\0025a0  "}ul.lst-kix_r3new9a30ppi-3{list-style-type:none}ul.lst-kix_r3new9a30ppi-2{list-style-type:none}.lst-kix_ay3zsv6x7td8-2>li:before{content:"\0025a0  "}.lst-kix_ay3zsv6x7td8-6>li:before{content:"\0025cf  "}.lst-kix_tdm04nsxcy8q-0>li:before{content:"" counter(lst-ctn-kix_tdm04nsxcy8q-0,decimal) ". "}.lst-kix_tdm04nsxcy8q-1>li:before{content:"" counter(lst-ctn-kix_tdm04nsxcy8q-1,lower-latin) ". "}.lst-kix_r3new9a30ppi-2>li:before{content:"\0025a0  "}ul.lst-kix_r3new9a30ppi-8{list-style-type:none}ul.lst-kix_r3new9a30ppi-5{list-style-type:none}.lst-kix_r3new9a30ppi-0>li:before{content:"\0025cf  "}.lst-kix_r3new9a30ppi-1>li:before{content:"\0025cb  "}ul.lst-kix_r3new9a30ppi-4{list-style-type:none}.lst-kix_ay3zsv6x7td8-3>li:before{content:"\0025cf  "}ul.lst-kix_r3new9a30ppi-7{list-style-type:none}.lst-kix_tdm04nsxcy8q-2>li:before{content:"" counter(lst-ctn-kix_tdm04nsxcy8q-2,lower-roman) ". "}ul.lst-kix_r3new9a30ppi-6{list-style-type:none}.lst-kix_c79ho0blhc8k-1>li:before{content:"\0025cb  "}.lst-kix_c79ho0blhc8k-0>li:before{content:"\0025cf  "}ul.lst-kix_8sxsy1a8ths3-1{list-style-type:none}ul.lst-kix_8sxsy1a8ths3-0{list-style-type:none}.lst-kix_ay3zsv6x7td8-8>li:before{content:"\0025a0  "}ul.lst-kix_8sxsy1a8ths3-3{list-style-type:none}ul.lst-kix_8sxsy1a8ths3-2{list-style-type:none}ul.lst-kix_8sxsy1a8ths3-5{list-style-type:none}ul.lst-kix_8sxsy1a8ths3-4{list-style-type:none}.lst-kix_ay3zsv6x7td8-7>li:before{content:"\0025cb  "}ul.lst-kix_8sxsy1a8ths3-7{list-style-type:none}.lst-kix_tdm04nsxcy8q-1>li{counter-increment:lst-ctn-kix_tdm04nsxcy8q-1}ul.lst-kix_8sxsy1a8ths3-6{list-style-type:none}.lst-kix_c79ho0blhc8k-8>li:before{content:"\0025a0  "}.lst-kix_tdm04nsxcy8q-2>li{counter-increment:lst-ctn-kix_tdm04nsxcy8q-2}.lst-kix_tdm04nsxcy8q-8>li{counter-increment:lst-ctn-kix_tdm04nsxcy8q-8}.lst-kix_c79ho0blhc8k-3>li:before{content:"\0025cf  "}.lst-kix_c79ho0blhc8k-2>li:before{content:"\0025a0  "}.lst-kix_c79ho0blhc8k-4>li:before{content:"\0025cb  "}.lst-kix_c79ho0blhc8k-5>li:before{content:"\0025a0  "}.lst-kix_ay3zsv6x7td8-0>li:before{content:"\0025cf  "}.lst-kix_ay3zsv6x7td8-1>li:before{content:"\0025cb  "}ol.lst-kix_tdm04nsxcy8q-1.start{counter-reset:lst-ctn-kix_tdm04nsxcy8q-1 0}.lst-kix_c79ho0blhc8k-7>li:before{content:"\0025cb  "}.lst-kix_c79ho0blhc8k-6>li:before{content:"\0025cf  "}ul.lst-kix_ay3zsv6x7td8-4{list-style-type:none}ol.lst-kix_tdm04nsxcy8q-0.start{counter-reset:lst-ctn-kix_tdm04nsxcy8q-0 0}ul.lst-kix_ay3zsv6x7td8-5{list-style-type:none}ul.lst-kix_ay3zsv6x7td8-6{list-style-type:none}.lst-kix_8sxsy1a8ths3-0>li:before{content:"\0025cf  "}ul.lst-kix_ay3zsv6x7td8-7{list-style-type:none}ul.lst-kix_ay3zsv6x7td8-8{list-style-type:none}.lst-kix_8sxsy1a8ths3-1>li:before{content:"\0025cb  "}ul.lst-kix_c79ho0blhc8k-6{list-style-type:none}ul.lst-kix_c79ho0blhc8k-5{list-style-type:none}ul.lst-kix_c79ho0blhc8k-8{list-style-type:none}ul.lst-kix_c79ho0blhc8k-7{list-style-type:none}ul.lst-kix_ay3zsv6x7td8-0{list-style-type:none}ul.lst-kix_ay3zsv6x7td8-1{list-style-type:none}ul.lst-kix_ay3zsv6x7td8-2{list-style-type:none}.lst-kix_8sxsy1a8ths3-7>li:before{content:"\0025cb  "}ul.lst-kix_ay3zsv6x7td8-3{list-style-type:none}ol.lst-kix_tdm04nsxcy8q-7.start{counter-reset:lst-ctn-kix_tdm04nsxcy8q-7 0}.lst-kix_8sxsy1a8ths3-6>li:before{content:"\0025cf  "}.lst-kix_8sxsy1a8ths3-5>li:before{content:"\0025a0  "}.lst-kix_8sxsy1a8ths3-2>li:before{content:"\0025a0  "}.lst-kix_8sxsy1a8ths3-4>li:before{content:"\0025cb  "}.lst-kix_8sxsy1a8ths3-3>li:before{content:"\0025cf  "}.lst-kix_6o9r0274l4qg-0>li:before{content:"\0025cf  "}ol{margin:0;padding:0}table td,table th{padding:0}.c17{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:61.5pt;border-top-color:#000000;border-bottom-style:solid}.c9{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:272.2pt;border-top-color:#000000;border-bottom-style:solid}.c8{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:195.8pt;border-top-color:#000000;border-bottom-style:solid}.c2{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:77.2pt;border-top-color:#000000;border-bottom-style:solid}.c20{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:92.2pt;border-top-color:#000000;border-bottom-style:solid}.c13{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:42pt;border-top-color:#000000;border-bottom-style:solid}.c1{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:102.8pt;border-top-color:#000000;border-bottom-style:solid}.c4{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c18{color:#ffffff;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Arial";font-style:italic}.c5{padding-top:20pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c22{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:"Arial";font-style:normal}.c0{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Arial";font-style:normal}.c34{color:#ffffff;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c6{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c3{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c32{border-spacing:0;border-collapse:collapse;margin-right:auto}.c16{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:center}.c10{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c33{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c7{padding:0;margin:0}.c14{orphans:2;widows:2}.c23{color:inherit;text-decoration:inherit}.c36{height:55pt}.c28{height:33pt}.c29{height:36pt}.c30{height:0pt}.c26{height:11pt}.c31{height:24pt}.c27{height:50pt}.c21{margin-left:72pt}.c19{padding-left:0pt}.c12{font-weight:700}.c11{background-color:#666666}.c35{text-indent:36pt}.c15{margin-left:36pt}.c25{height:43pt}.c24{font-style:italic}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}
  </style>
  <title></title>
</head>
<body class="c33">
  <p class="c6 c14"><span>Written by: Piotr P. Nikiel
  &lt;</span><span class="c10"><a class="c23" href=
  "mailto:piotr@nikiel.info">piotr@nikiel.info</a></span><span class="c4">&gt;
  Jan-Feb 2019</span></p>
  <p class="c6 c14"><span class="c4">Reviewed and improved by:
  Paris Moschovakos, Ben Farnham, Stefan Schlenker</span></p>
  <h1 class="c5" id="h.4qiakb200pno"><span class=
  "c24">quasar</span><span class="c22">, quasar-based servers and
  the build system</span></h1>
  <p class="c6 c14"><span class="c24">quasar</span><span class=
  "c4">&nbsp;is a framework for rapid and efficient development of
  (quasar-based) OPC-UA servers in the C++ programming language. A
  build system must accompany a framework like quasar to offload
  its users from tasks like:</span></p>
  <ul class="c7 lst-kix_ay3zsv6x7td8-0 start">
    <li class="c6 c14 c19 c15"><span class="c4">compiling the
    software (i.e. running the compiler on a set of sources,
    passing options, running linkers etc.)</span></li>
    <li class="c6 c14 c19 c15"><span class="c4">guaranteeing
    coherency of builds (i.e. a changed source file must be
    recompiled, possibly triggering additional steps in the
    dependency chain)</span></li>
    <li class="c6 c14 c19 c15"><span class="c4">guaranteeing
    efficiency of builds (i.e. it's not necessary to recompile a
    file that has not been changed)</span></li>
    <li class="c6 c14 c19 c15"><span class="c4">handling build
    portability among different operating systems, compilers
    (including cross compilers), environments, versions of required
    libraries, architectures</span></li>
    <li class="c6 c14 c19 c15"><span class="c4">integrating the
    server build system as a part of another, parent build
    system.</span></li>
  </ul>
  <h1 class="c5" id="h.or0tfi7zyuzz"><span class="c22">CMake as
  quasar's build system workhorse</span></h1>
  <p class="c6 c14 c26"></p>
  <p class="c6 c14"><span>CMake has been quasar's build system
  workhorse since quasar's beginnings. For details on CMake please
  refer to its webpage,</span> <span class="c10"><a class="c23"
  href=
  "https://www.google.com/url?q=https://cmake.org/&amp;sa=D&amp;ust=1550254046613000">
  https://cmake.org/</a></span><span class="c4">.</span></p>
  <p class="c6 c14 c26"></p>
  <p class="c6 c14"><span class="c4">The following features of
  CMake made it an attractive candidate:</span></p>
  <ul class="c7 lst-kix_8sxsy1a8ths3-0 start">
    <li class="c6 c14 c19 c15"><span class="c4">widespread usage in
    industry which usually means availability of experience,
    knowledge and developers familiarized with it</span></li>
    <li class="c6 c14 c19 c15"><span class="c4">widespread usage at
    CERN</span></li>
    <li class="c6 c14 c19 c15"><span class="c4">previous positive
    experience</span></li>
    <li class="c6 c14 c19 c15"><span class="c4">it's free and it's
    open-source software</span></li>
    <li class="c6 c14 c19 c15"><span class="c4">support for
    different operating systems, compilers,
    architectures.</span></li>
  </ul>
  <h1 class="c5" id="h.cpwsmk78s770"><span class="c22">How CMake is
  wrapped by quasar and why</span></h1>
  <p class="c6 c14"><span>For most use-cases, quasar end-users
  generate compiler specific build instructions (think unix
  makefiles, or visual studio solution files) and invoke the
  corresponding builds entirely via the standard quasar command
  line interface. That is to say, via the command line
  instruction</span> <span class="c24">python quasar.py
  build</span><span class="c4">. In these use-cases, the end-user
  never directly invokes cmake; quasar’s internal scripts handle
  this.</span></p>
  <p class="c6 c14 c26"></p>
  <p class="c6 c14"><span class="c4">The reason for it is that, by
  quasar design, source files (e.g. Address Space classes, Device
  classes…) for different quasar classes live in source files whose
  names are dependent on quasar Design.xml and CMake doesn't
  support dynamically created lists of files to compile. Some hacks
  exist to do this natively in CMake but their robustness and
  future availability is questionable.</span></p>
  <p class="c6 c14 c26"></p>
  <p class="c6 c14"><span class="c4">Therefore quasar.py (quasar's
  user entry point) wraps the missing part and:</span></p>
  <ol class="c7 lst-kix_tdm04nsxcy8q-0 start" start="1">
    <li class="c6 c14 c19 c15"><span class="c4">generates
    Design-dependent list of files for Address Space and Device
    modules,</span></li>
    <li class="c6 c14 c19 c15"><span class="c4">runs CMake in the
    build (= binary) directory.</span></li>
  </ol>
  <p class="c6 c14 c26"></p>
  <p class="c6 c14"><span>However, certain build modes (e.g.
  Yocto/PetaLinux) require that CMake</span> <span class=
  "c24">is</span><span class="c4">&nbsp;the build entry point. In
  such a case the actions from point 1 above can be manually
  triggered by the user and their deliverables can be stored in the
  server repository. Detailed usage mode is discussed in the
  Yocto/PetaLinux tutorial of quasar.</span></p>
  <h1 class="c5" id="h.food0epcxc4"><span class="c22">How are
  server sources organized?</span></h1>
  <p class="c6 c14"><span class="c4">Sources of a quasar-based
  server are organized in modules. Each module is stored in a
  separate directory under the quasar server parent directory.
  There are three types of modules:</span></p>
  <ul class="c7 lst-kix_c79ho0blhc8k-0 start">
    <li class="c6 c14 c15 c19"><span class=
    "c12">native</span><span class="c4"><br>
    These are compulsory modules of any quasar-based server. The
    build system knows about them intrinsically. At the time of
    writing, they comprise of: AddressSpace, CalculatedVariables,
    Configuration, Device, LogIt, Meta and Server.</span></li>
    <li class="c6 c14 c19 c15"><span class=
    "c12">optional</span><span class="c4"><br>
    These are modules which are deployed by quasar's "optional
    modules" mechanism. The build system knows about them because
    user selects them using quasar.py commands such as
    enable_module or disable_module. A detailed documentation of
    optional modules is available … &lt;place link to
    HTML&gt;</span></li>
    <li class="c6 c14 c19 c15"><span class=
    "c12">custom</span><span class="c4"><br>
    These are modules which are entirely under user's
    responsibility, but thanks to using the same architecture like
    aforementioned native and optional modules, they can be easily
    included in the server build process.</span></li>
  </ul>
  <p class="c6 c14 c15"><span class="c4">The architecture defines
  organization of quasar modules:</span></p>
  <ul class="c7 lst-kix_c79ho0blhc8k-1 start">
    <li class="c6 c14 c21 c19"><span class="c4">header files are in
    include/ (quasar build system will include this directory for
    any enabled module)</span></li>
    <li class="c6 c14 c21 c19"><span class="c4">source files are in
    src/</span></li>
    <li class="c6 c14 c21 c19"><span class="c4">there is a
    CMakeLIsts.txt per each module which is integrated by the
    parent using add_subdirectory</span></li>
    <li class="c6 c14 c21 c19"><span class="c4">other common
    subdirectories are: doc (documentation), extra (supplementary
    files for additional functionality), py (for python code)
    etc.</span></li>
  </ul>
  <p class="c6 c14 c35"><span class="c4">Custom module deployment
  is comprised of:</span></p>
  <ul class="c7 lst-kix_c79ho0blhc8k-1">
    <li class="c6 c14 c19 c21"><span class="c4">deployment of
    module sources<br>
    We recommend "git submodules" mechanism for custom modules
    which are shared among multiple projects and direct placement
    of sources for custom modules which are not to be shared among
    multiple projects.</span></li>
    <li class="c6 c14 c21 c19"><span class="c4">enabling of a
    module in the build system<br>
    The custom module name should be appended to variable
    CUSTOM_SERVER_MODULES in the file
    ProjectSettings.cmake</span></li>
  </ul>
  <p class="c6 c14 c15"><span class="c4">After both steps the
  quasar build system will take the custom module into
  account.</span></p>
  <h1 class="c5" id="h.sg2g3wd2rr0v"><span class="c22">Summary of
  build modes available in quasar</span></h1><a id=
  "t.e2144b47e855e5c6b25a02368fae06a581fc267e"></a><a id="t.0"></a>
  <table class="c32">
    <tbody>
      <tr class="c28">
        <td class="c1 c11" colspan="1" rowspan="1">
          <p class="c6"><span class=
          "c18">Mode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
        </td>
        <td class="c13 c11" colspan="1" rowspan="1">
          <p class="c6"><span class="c18">For embedded</span></p>
        </td>
        <td class="c20 c11" colspan="1" rowspan="1">
          <p class="c6"><span class="c18">Toolset (compiler,
          linker, etc.)</span></p>
        </td>
        <td class="c2 c11" colspan="1" rowspan="1">
          <p class="c6"><span class="c18">Build entry
          point</span></p>
        </td>
        <td class="c20 c11" colspan="1" rowspan="1">
          <p class="c6"><span class="c18">Known Users</span></p>
        </td>
        <td class="c17 c11" colspan="1" rowspan="1">
          <p class="c6"><span class="c18">Special
          restriction</span></p>
        </td>
      </tr>
      <tr class="c29">
        <td class="c1" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">Native build on
          x64</span></p>
        </td>
        <td class="c13" colspan="1" rowspan="1">
          <p class="c16"><span class="c0">N</span></p>
        </td>
        <td class="c20" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">system default or user
          chosen (e.g. LCG)</span></p>
        </td>
        <td class="c2" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">quasar build</span></p>
        </td>
        <td class="c20" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">Most of deployments for
          Linux and Windows</span></p>
        </td>
        <td class="c17" colspan="1" rowspan="1">
          <p class="c16"><span class="c0">-</span></p>
        </td>
      </tr>
      <tr class="c25">
        <td class="c1" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">Cross-compiler
          mode</span></p>
        </td>
        <td class="c13" colspan="1" rowspan="1">
          <p class="c16"><span class="c0">Y</span></p>
        </td>
        <td class="c20" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">Controlled by separate
          toolchain file (CC, CXX, sysroot, flags, …)</span></p>
        </td>
        <td class="c2" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">quasar build</span></p>
        </td>
        <td class="c20" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">No production deployments
          now.</span></p>
          <p class="c6"><span class="c0">Dev for RPi and
          RCE.</span></p>
        </td>
        <td class="c17" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">open62541
          preferred</span></p>
        </td>
      </tr>
      <tr class="c31">
        <td class="c1" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">Yocto mode (covers
          PetaLinux)</span></p>
        </td>
        <td class="c13" colspan="1" rowspan="1">
          <p class="c16"><span class="c0">Y</span></p>
        </td>
        <td class="c20" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">Yocto-built</span></p>
        </td>
        <td class="c2" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">yocto and CMake-level
          integration (NO quasar build)</span></p>
        </td>
        <td class="c20" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">Planned
          production:</span></p>
          <p class="c6"><span class="c0">gFEX
          monitoring,</span></p>
          <p class="c6"><span class="c0">ELMB++ receiver</span></p>
        </td>
        <td class="c17" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">open62541 only</span></p>
        </td>
      </tr>
      <tr class="c36">
        <td class="c1" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">Embeddable server
          (compiles server as a shared
          object)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
        </td>
        <td class="c13" colspan="1" rowspan="1">
          <p class="c16"><span class="c0">depends</span></p>
        </td>
        <td class="c20" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">Embedder decision (e.g.
          for Python match given Python version
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;API/ABI...)</span></p>
        </td>
        <td class="c2" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">1st step: quasar
          build</span></p>
          <p class="c6"><span class="c0">2nd step: embedder
          dependent</span></p>
        </td>
        <td class="c20" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">eFEX prototype</span></p>
        </td>
        <td class="c17" colspan="1" rowspan="1">
          <p class="c16"><span class="c0">-</span></p>
        </td>
      </tr>
      <tr class="c27">
        <td class="c1" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">Native build but on
          unusual architecture (e.g. ARM)</span></p>
        </td>
        <td class="c13" colspan="1" rowspan="1">
          <p class="c16"><span class="c0">Y</span></p>
        </td>
        <td class="c20" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">system
          default&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
        </td>
        <td class="c2" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">quasar build</span></p>
        </td>
        <td class="c20" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">MuCTPi</span></p>
        </td>
        <td class="c17" colspan="1" rowspan="1">
          <p class="c6"><span class="c0">open62541
          preferred,</span></p>
          <p class="c6"><span class="c0">possibly no
          network</span></p>
        </td>
      </tr>
    </tbody>
  </table>
  <h1 class="c5" id="h.cvkzi04witjf"><span class="c22">Build
  configuration files</span></h1>
  <p class="c6 c14"><span class="c4">A build configuration file is
  a CMake script defining (typically using the set() statement) the
  configuration of a build. The aspects typically covered by build
  configs are:</span></p>
  <ul class="c7 lst-kix_ytm01fwibfq9-0 start">
    <li class="c6 c14 c19 c15"><span class="c4">Path to OPC-UA
    stack (if used)</span></li>
    <li class="c6 c14 c19 c15"><span class="c4">Path to boost
    headers and libs and list of libraries to link
    against if they cannot be automatically resolved. Note that by default, the quasar cmake engine uses  <a href="https://cmake.org/cmake/help/latest/module/FindBoost.html">find_boost</a> to resolve boost header and lib locations. To set a custom boost location use the BOOST_ROOT environment variable. See also the paragraph about ProjectSettings.cmake below.</span></li>
    <li class="c6 c14 c19 c15"><span class="c4">Additional compiler
    defines (e.g. -fPIC or -Wall or so).</span></li>
  </ul>
  <p class="c6 c14"><span class="c4">In addition, path(s) to
  cross-compilers and their sysroot(s) are often specified
  there.</span></p>
  <p class="c6 c14 c26"></p>
  <p class="c6 c14"><span class="c4">You can have (store) multiple
  build configuration files because one OPC-UA server project might
  be built to suit requirements of different clients. For instance,
  you can have one build config for Windows Server 2012, one config
  for Windows 10, one config for Ubuntu and one for cross-compiling
  for Raspian.</span></p>
  <p class="c6 c14 c26"></p>
  <p class="c6 c14"><span class="c4">To switch between different
  build configs, use "quasar.py set_build_config" command. Note
  that "quasar.py build" will always use the recently chosen build
      config.</span></p>
  <p class="c6 c14 c26"></p>
  <p class="c6 c14"><span class="c4">The following optional variables/settings may be used to influence the build process:</span></p>
  <table class="c32">
    <tbody>
      <tr class="c30">
        <td class="c8 c11" colspan="1" rowspan="1">
          <p class="c3"><span class="c34">Setting name</span></p>
        </td>
        <td class="c9 c11" colspan="1" rowspan="1">
          <p class="c3"><span class="c34">Meaning</span></p>
        </td>
      </tr>
      <tr class="c30">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c3"><span class=
          "c4">IGNORE_DEFAULT_BOOST_SETUP</span></p>
        </td>
        <td class="c9" colspan="1" rowspan="1">
          <p class="c3"><span class="c4">By default, quasar tries to resolve boost dependencies automatically using CMake's <i>FindBoost</i> function (see also setting ADDITIONAL_BOOST_LIBS below). By setting this variable to ON, no automatic boost resolution is attempted and must be explicitly done within the build config. Note that if this setting is activated, the project setting ADDITIONAL_BOOST_LIBS has no effect.</span></p>
        </td>
      </tr>
      <tr class="c30">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c3"><span class=
          "c4">GITHUB_REPLACEMENT</span></p>
        </td>
        <td class="c9" colspan="1" rowspan="1">
          <p class="c3"><span class="c4">By default, quasar optional modules are fetched from their respective github location. Use this variable to replace the default URL base <pre>https://github.com/</pre> with the variable value (example: <pre>ssh://git@gitlab.cern.ch:7999/</pre>)</span></p>
        </td>
      </tr>
    </tbody>
  </table>
  <h1 class="c5" id="h.ps44wq6o7efp"><span class="c22">Build
  configuration files vs ProjectSettings.cmake</span></h1>
  <p class="c6 c14"><span class="c4">The ProjectSettings.cmake file
  describes project settings which do not depend on the particular
  build scenario. At the time of writing the ProjectSettings.cmake
  would enable to control the following:</span></p>
  <p class="c6 c14 c26"></p><a id=
  "t.0d45662d286254f4f106e5509a995b379d6d18ce"></a><a id="t.1"></a>
  <table class="c32">
    <tbody>
      <tr class="c30">
        <td class="c8 c11" colspan="1" rowspan="1">
          <p class="c3"><span class="c34">Setting name</span></p>
        </td>
        <td class="c9 c11" colspan="1" rowspan="1">
          <p class="c3"><span class="c34">Meaning</span></p>
        </td>
      </tr>
      <tr class="c30">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c3"><span class=
          "c4">CUSTOM_SERVER_MODULES</span></p>
        </td>
        <td class="c9" colspan="1" rowspan="1">
          <p class="c3"><span class="c4">List of custom server
          modules, described above.<br>
          Default: empty.</span></p>
        </td>
      </tr>
      <tr class="c30">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c3"><span class="c4">EXECUTABLE</span></p>
        </td>
        <td class="c9" colspan="1" rowspan="1">
          <p class="c3"><span class="c4">Name of the executable
          file.</span></p>
          <p class="c3"><span class="c4">Default:
          OpcUaServer</span></p>
          <p class="c3"><span class="c4">Note: CMake will
          automatically append platform-dependent suffix, e.g. .exe
          for Windows.</span></p>
        </td>
      </tr>
      <tr class="c30">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c3"><span class=
          "c4">SERVER_INCLUDE_DIRECTORIES</span></p>
        </td>
        <td class="c9" colspan="1" rowspan="1">
          <p class="c3"><span class="c4">Additional include
          directories, might be evaluated from a CMake variable
          defined in a build config.</span></p>
          <p class="c3"><span class="c4">Default: empty.</span></p>
        </td>
      </tr>
      <tr class="c30">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c3"><span class=
          "c4">SERVER_LINK_LIBRARIES</span></p>
        </td>
        <td class="c9" colspan="1" rowspan="1">
          <p class="c3"><span class="c4">Additional libs to link
          against, might be evaluated from a CMake variable defined
          in a build config.</span></p>
          <p class="c3"><span class="c4">Default: empty.</span></p>
        </td>
      </tr>
      <tr class="c30">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c3"><span class=
          "c4">SERVER_LINK_DIRECTORIES</span></p>
        </td>
        <td class="c9" colspan="1" rowspan="1">
          <p class="c3"><span class="c4">Additional lib
          directories, might be evaluated from a CMake variable
          defined in a build config.</span></p>
          <p class="c3"><span class="c4">Default: empty.</span></p>
        </td>
      </tr>
      <tr class="c30">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c3"><span class=
          "c4">BUILD_SERVER_SHARED_LIB</span></p>
        </td>
        <td class="c9" colspan="1" rowspan="1">
          <p class="c3"><span class="c4">If ON, the server will be
          built as a shared object in addition to a regular
          executable.</span></p>
          <p class="c3"><span class="c4">Default: OFF</span></p>
        </td>
      </tr>
      <tr class="c30">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c3"><span class=
          "c4">ADDITIONAL_BOOST_LIBS</span></p>
        </td>
        <td class="c9" colspan="1" rowspan="1">
          <p class="c3"><span class="c4">Additional boost libraries can be specified as a list using their canonical name such as date_time or program_options.</span></p>
          <p class="c3"><span class="c4">Default: empty</span></p>
        </td>
      </tr>
    </tbody>
  </table>
  <p class="c6 c14 c26"></p>
  <p class="c6 c14"><span class="c4">There is always one
  ProjectSettings.cmake in your project.</span></p>
  <h1 class="c5" id="h.it6qme5jd78d"><span class=
  "c22">CMakeEpilogue.cmake</span></h1>
  <p class="c6 c14"><span class="c4">In certain cases some
  additional CMake statements must be injected after the
  declaration of the executable. CMake's INSTALL() statements are a
  good example of it.</span></p>
  <p class="c6 c14 c26"></p>
  <p class="c6 c14"><span class="c4">If that is your case, put
  those into CMakeEpilogue.cmake. quasar's master CMakeLists.txt
  will notice the file and include its content at the end of master
  CMakeLists.txt</span></p>
  <p class="c6 c14 c26"></p>
  <p class="c6 c14"><span class="c4">A good example of such an
  application is available in Extra/yocto/CMakeEpilogue.cmake in
  the quasar repo.</span></p>
  <h1 class="c5" id="h.n8z5qax2cwem"><span class=
  "c22">Recommendations to server developers</span></h1>
  <ul class="c7 lst-kix_r3new9a30ppi-0 start">
    <li class="c6 c14 c19 c15"><span class="c4">Never modify the
    master CMakeLists.txt</span></li>
    <li class="c6 c14 c19 c15"><span class="c4">Put relevant
    settings to ProjectSettings.cmake</span></li>
    <li class="c6 c14 c19 c15"><span class="c4">Use as many build
    configurations as you need. It is common to reuse build
    configurations between multiple OPC-UA server
    projects.</span></li>
  </ul>
</body>
</html>
